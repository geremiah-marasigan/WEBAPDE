<html>

<head>
    <link rel="stylesheet" href="styles/super-style.css">
    <link rel="stylesheet" href="styles/logged-style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="js/meme-script.js"></script>
</head>

<body>
    <div>
        <nav>
            <div>
                <ul>
                    <li>
                        <a href="logged-in.html" id="logo"><img id="logo" src="resources/logo.png"/></a>
                    </li>
                    <li>
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="user-menu" data-toggle="dropdown">
                            <img id="profile-pic" src="https://lh3.googleusercontent.com/-rynVhQCyvkY/AAAAAAAAAAI/AAAAAAAAAAY/bNIUWoBt9zk/w360-h203-p/photo.jpg"/>
                            </button>
                            <div class="dropdown-menu" role="menu" aria-labelledby="user-menu">
                                <a class="dropdown-item" href="user.html">Profile</a>
                                <a class="dropdown-item" data-toggle="modal" data-target="#uploadModal">Add Meme</a>
                                <a class="dropdown-item" id="sign-out" href="index.html">Sign-Out</a>
                                <a class="dropdown-item" id="sign-out" href="index.html">Sign-Out</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div id="search">
                            <form>
                                <input id="search-input" type="text" placeholder="Search Tags" />
                                <a href="logged-in-cat.html" class="submit-button">
                                    <i class="fa fa-search"></i>
                                </a>
                            </form>
                        </div>
                    </li>

                </ul>
            </div>
        </nav>
    </div>
    <div class="main">
        <h1>Shared</h1>
        <div class="images">
            <div class="row justify-content-md-center">
                <div class="row justify-content-md-center">
                    <div class="col col-lg-3">
                        <img class="meme" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/1200px-Cat03.jpg" data-toggle="modal" data-target="#memeModalLoggedIn" />
                    </div>
                    <div class="col col-lg-3">
                        <img class="meme" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/1200px-Cat03.jpg" data-toggle="modal" data-target="#memeModalLoggedIn" />
                    </div>
                    <div class="col col-lg-3">
                        <img class="meme" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/1200px-Cat03.jpg" data-toggle="modal" data-target="#memeModalLoggedIn" />
                    </div>
                </div>
            </div>
        </div>

        <h2>Public</h2>
        <div class="images">
            <div class="row justify-content-md-center">
                <div class="row justify-content-md-center">
                    <div class="col col-lg-3" id="column0">
                    </div>
                    <div class="col col-lg-3" id="column1">
                    </div>
                    <div class="col col-lg-3" id="column2">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <!--
        <div class="modal fade" id="memeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Before and after Jakol</h5>
                <div class="modal-subheading">By mr_bizcuit</div>
              </div>
              <div class="modal-body">
                <img src="https://static.boredpanda.com/blog/wp-content/uploads/2018/04/5acb63d83493f__700-png.jpg"/>
                <span class="description">I calm down every time.</span>
              </div>
              <div class="modal-footer">
                  <div class="tags">
                    <div>Tags:</div>
                    <div class="memetag"><a href="">NSFW</a><button type="button" style="display: none;">x</button>, </div>
                    
                    <div class="memetag"><a href="">Bastos</a><button type="button" style="display: none;">x</button>, </div>
                    
                    <div class="memetag"><a href="">Cat</a><button type="button" style="display: none;">x</button></div>
                    
                  </div>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        
-->
    <div class="modal fade" id="memeModalLoggedIn" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">As pretty as a Cat</h5>
                    <div class="modal-subheading">By <a href="user.html">Durstnt</a> | Private</div>
                </div>
                <div class="modal-body">
                    <img class="meme" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/1200px-Cat03.jpg" />
                    <span class="description">I love pussy</span>
                    <br/>
                    <hr>
                    <div class="tagAdder">
                        <span>Add Tags:</span>
                        <input type="text" placeholder="Separate tags with a comma" />
                        <button type="button" class="btn btn-default">Add</button>
                    </div>
                    <div class="editDescription">
                        <span>Edit Description:</span>
                        <textarea rows="4" cols="50"></textarea>
                        <button type="button" class="btn btn-default update-description">Update</button>
                    </div>
                    <div class="shareMemeSection">
                        <span>Shared With:</span> <br/>
                        <div class="memeShare">
                            <span>mr_bizcuit</span><button class="removeBtn" type="button" style="display: none;">x</button>
                        </div>
                        <div class="memeShare">
                            <span>Jdelbz</span><button class="removeBtn" type="button" style="display: none;">x</button>
                        </div>
                    </div>
                    <div class="shareMeme">
                        <input type="text" placeholder="Add users to share with" id="sharedUser" />
                        <button type="button" class="btn btn-success share-meme" id="addShare">Add</button>
                    </div>
                    <div class="deleteMeme">
                        <button type="button" class="btn btn-danger" class="btnDelete">Delete</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="tags">
                        <div>Tags: </div>
                        <div class="memetag"><a href="logged-in-cute.html">Cute</a><button class="removeBtn" type="button" style="display: none;">x</button>, </div>
                        <div class="memetag"><a href="logged-in-cat.html">Cat</a><button class="removeBtn" type="button" style="display: none;">x</button></div>
                    </div>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--Uploading a Meme-->
    <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Upload a Meme</h5>
                </div>
                <div class="modal-body">
                    <div class="title">
                        <span>Meme Title: </span>
                        <input id="memeTitle" type="text">
                    </div>
                    <br>
                    <div class="upload-photo">
                        <span>Choose a photo: </span>
                        <input id="memeFile" type="file" />
                    </div>
                    <br/>
                    <div class="tagAdder">
                        <span>Add Tags:</span>
                        <input id="memeTags" type="text" placeholder="Separate tags with a comma" />
                    </div>
                    <div class="editDescription">
                        <span>Set Description:</span>
                        <textarea id="memeDesc" rows="4" cols="50"></textarea>

                    </div>
                    <div class="statusChk">
                        <input type="checkbox" id=p ublicChk onclick="isPublic()">
                        <label>Public</label>
                    </div>
                    <div id="shareUpload">
                        <span>Share With:</span>
                        <input id="memeShare" type="text" placeholder="Separate with a comma" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="closeBtn" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="uploadBtn">Upload</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    //removes tags and shared users
    function removeMe() {
        console.log($(this).parent().remove())
        console.log($(this).hasClass("removeBtn"))
    }

    function addShareMeme() {
        console.log("PRESSED")
        var input = document.getElementById("sharedUser").value
        var shareDiv = document.createElement("div")
        $(shareDiv).addClass("memeShare")
        var nameSpan = document.createElement("span")
        var nameText = document.createTextNode(input)
        $(nameSpan).append(nameText)
        var removeButton = document.createElement("button")
        $(removeButton).addClass("removeBtn")
        $(removeButton).attr("type", "button")
        $(removeButton).attr("style", "display: none")
        var removeLabel = document.createTextNode("x")
        $(removeButton).append(removeLabel)
        $(shareDiv).append(nameSpan)
        $(shareDiv).append(removeButton)
        $(".shareMemeSection").append(shareDiv)

        console.log($(removeButton).hasClass("removeBtn"))

        document.getElementById("sharedUser").value = ""
    }

    //Makes sure functions only run when document is ready
    $(document).ready(function() {
        var x = 0
        var memeURL = "https://i.pinimg.com/originals/87/90/60/879060975a331d71de3fbe20d6938c1e.jpg"

        $(".removeBtn").click(removeMe)
        $("#addShare").click(addShareMeme)

        for (x = 0; x < 15; x++) {

            var memeImg = document.createElement("img")
            $(memeImg).addClass("meme")
            $(memeImg).attr("src", memeURL)
            $(memeImg).attr("data-toggle", "modal")
            $(memeImg).attr("data-target", "#meme" + x)

            $("#column" + x % 3).append(memeImg)

            newMeme(new Meme("It's a cat", "mr_bizcuit", "Wow what a cool cat", memeURL, ["Cat"], ["logged-in-cat.html"], "Public"),x)
        }

        $(".modal-footer #uploadBtn").on("click", function() {
            console.log("I have been pressed")
            var memeTitle = document.getElementById("memeTitle").value
            var memeFile = "https://scontent.fmnl10-1.fna.fbcdn.net/v/t1.15752-9/36941533_2410232395658474_6188230137532645376_n.png?_nc_cat=0&oh=df503d9734abb8be8f61b20df537e59a&oe=5BD0AD1A"
            var memeTags = document.getElementById("memeTags").value.split(",")
            var memeDesc = document.getElementById("memeDesc").value
            var memeStat = document.getElementById("publicChk").checked
            var status = ""

            if (memeStat == true) {
                status = "Public"
            } else if (memeStat == false) {
                status = "Private"
            } else {
                console.log("WTF NO CHECK???")
            }

            var memeImg = document.createElement("img")
            $(memeImg).addClass("meme")
            $(memeImg).attr("src", memeURL)
            $(memeImg).attr("data-toggle", "modal")
            $(memeImg).attr("data-target", "#meme" + x)

            $("#column" + x % 3).append(memeImg)

            newMeme(new Meme(memeTitle, "Durstnt", memeDesc, memeFile, memeTags, [], status), x)
            x++;

            $(".modal-footer #closeBtn").click()
        })

        //Adds remove button on hover and removes on leave
        $(".modal-footer .tags .memetag").on('mouseenter', function() {
            $(this).find(":button").show();
            console.log("in");
        }).on('mouseleave', function() {
            $(this).find(":button").hide();
            console.log("out");
        });
        $(".modal-body .shareMemeSection .memeShare").on('mouseenter', function() {
            $(this).find(":button").show();
            console.log("in");
        }).on('mouseleave', function() {
            $(this).find(":button").hide();
            console.log("out");
        });


    });

</script>

</html>
